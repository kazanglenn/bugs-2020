{"version":3,"sources":["assets/bugs2020.png","assets/flatworm.png","assets/algae_small.png","assets/background_water.png","redux/reducers/measures.js","redux/actionTypes.js","redux/reducers/species.js","redux/reducers/control.js","redux/reducers/tracker.js","redux/reducers/parameters.js","redux/reducers/index.js","redux/store.js","redux/actions.js","redux/selectors.js","components/Parameters/Parameters.jsx","components/Parameters/index.jsx","components/Title/Title.jsx","components/Title/index.jsx","components/ReactViewport/ReactViewport.jsx","components/Bug/Bug.jsx","components/Simulation/physics.js","components/Simulation/Simulation.jsx","components/Simulation/index.jsx","components/SummaryChart/SummaryChart.jsx","components/SummaryChart/index.jsx","components/SpeciesChart/SpeciesChart.jsx","components/SpeciesChart/index.jsx","components/Controls/Controls.jsx","components/Controls/index.jsx","components/Tracker/Tracker.jsx","components/Tracker/index.jsx","components/Header/Header.jsx","components/Header/index.jsx","App.jsx","index.jsx"],"names":["module","exports","measures","state","action","type","measure","payload","slice","Math","max","length","species","control","initTracker","ticks","bugs","algae","totalBugs","totalSpecies","tracker","Object","assign","initParameters","maxBugs","breedingCost","maxAlgae","algaeBreedThreshold","sampleInterval","mutationRate","parameters","combineReducers","createStore","rootReducer","window","__REDUX_DEVTOOLS_EXTENSION__","setControl","getParameters","useStyles","makeStyles","theme","root","width","margin","height","spacing","button","largeMarks","value","label","mediumMarks","smallMarks","Parameters","connect","setParameters","resetParameters","props","classes","useState","params","setParams","className","Typography","id","gutterBottom","Slider","onChange","event","newValue","newParams","aria-labelledby","step","marks","min","Button","variant","onClick","toggle","card","maxWidth","maxHeight","display","flexDirection","content","media","Title","Card","CardMedia","image","TitleImage","title","CardContent","color","component","PixiComponent","create","viewport","Viewport","screenWidth","innerWidth","screenHeight","innerHeight","worldWidth","worldHeight","console","log","drag","pinch","wheel","decelerate","applyProps","instance","oldProps","newProps","didMount","willUnmount","flexGrow","minWidth","transform","modal","padding","alignItems","justifyContent","paper","backgroundColor","palette","background","border","boxShadow","shadows","contact","r1","r2","combinedHalfWidths","combinedHalfHeights","vx","vy","centerX","x","centerY","y","halfWidth","halfHeight","abs","backgroundImage","BackgroundImage","speciesCounts","config","properties","position","rotation","scale","uvs","alpha","listeners","prop","val","this","forEach","l","Settings","changed","setState","clearTimeout","changeTimeout","setTimeout","push","children","React","PureComponent","BugSprite","BugImage","anchor","overwriteProps","ignoreEvents","interactive","pointerdown","positions","AlgaeSprite","AlgaeImage","notice","text","style","PIXI","fontSize","fontFamily","fontWeight","fill","initBugs","count","Array","map","speed","ceil","random","turningSpeed","direction","PI","tint","round","_s","energy","cycles","breedThreshold","floor","geneology","uuidv4","parent","bug","initAlgae","Batch","withPixiApp","time","bounds","bugCount","algaeCount","deaths","items","item","i","splice","bugLogic","vbugs","offspring","evolve","uuid","other","eatenAlgae","sin","cos","change","algaeLogic","index","isContact","tick","newItem","app","ticker","stop","sample","cycle","addMeasure","setTracker","entries","key","normal","keys","name","counts","addSpeciesCount","Number","screen","add","remove","valgae","message","concat","started","start","resetMeasure","resetSpeciesCount","nextProps","prevState","Simulation","getControl","options","transparent","responsive","animation","scales","xAxes","stepSize","yAxes","legend","labels","fontColor","layout","left","right","top","bottom","SummaryChart","getMeasures","chartdata","datasets","data","m","yAxisID","borderColor","borderWidth","pointRadius","pointHoverRadius","SpeciesChart","getSpecies","chartData","element","entry","colour","premultiplyTintToRgba","hexcolour","borderColourString","colourString","spanGaps","Controls","Tracker","getTracker","TableContainer","Paper","Table","table","size","aria-label","TableHead","TableRow","TableCell","align","TableBody","offset","mixins","toolbar","menuButton","marginRight","menu","Header","settings","setSettings","setMenu","toggleSettings","open","toggleMenu","ListItemLink","icon","primary","to","renderLink","useMemo","forwardRef","itemProps","ref","ListItem","ListItemIcon","ListItemText","initialEntries","initialIndex","AppBar","Toolbar","IconButton","edge","Drawer","onClose","role","onKeyDown","List","href","exact","path","createMuiTheme","render","store","ThemeProvider","document","getElementById"],"mappings":"iGAAAA,EAAOC,QAAU,IAA0B,sC,kBCA3CD,EAAOC,QAAU,k5D,kBCAjBD,EAAOC,QAAU,khD,oBCAjBD,EAAOC,QAAU,IAA0B,8C,uJCmB1BC,EAfA,WAAyB,IAAxBC,EAAuB,uDAAf,GAAIC,EAAW,uCACrC,OAAQA,EAAOC,MACb,ICNqB,cDMrB,IACUC,EAAYF,EAAOG,QAAnBD,QACR,MAAM,GAAN,mBACKH,EAAMK,MAAMC,KAAKC,IAAIP,EAAMQ,OAAS,IAAK,KAD9C,CAEEL,IAEJ,ICXuB,gBDYrB,MAAO,GACT,QACE,OAAOH,IEGES,EAdD,WAAyB,IAAxBT,EAAuB,uDAAf,GAAIC,EAAW,uCACpC,OAAQA,EAAOC,MACb,IDJ2B,oBCKzB,MAAM,GAAN,mBACKF,EAAMK,MAAMC,KAAKC,IAAIP,EAAMQ,OAAS,IAAK,KAD9C,CAEEP,EAAOG,QAAQK,UAEnB,IDR6B,sBCS3B,MAAO,GACT,QACE,OAAOT,ICFEU,EATD,WAA6B,IAA5BV,EAA2B,uDAAnB,OAAQC,EAAW,uCACxC,OAAQA,EAAOC,MACb,IFDqB,cEEnB,OAAOD,EAAOG,QAAQM,QACxB,QACE,OAAOV,ICLTW,EAAc,CAClBC,MAAO,EACPC,KAAM,EACNC,MAAO,EACPC,UAAW,GACXC,aAAc,IAYDC,EATC,WAAkC,IAAjCjB,EAAgC,uDAAxBW,EAAaV,EAAW,uCAC/C,OAAQA,EAAOC,MACb,IHRuB,cGSrB,OAAOgB,OAAOC,OAAO,GAAIlB,EAAOG,QAAQa,SAC1C,QACE,OAAOjB,ICbPoB,EAAiB,CACrBC,QAAS,IACTC,aAAc,IACdC,SAAU,IACVC,oBAAqB,IACrBC,eAAgB,IAChBC,aAAc,IAcDC,EAXI,WAAqC,IAApC3B,EAAmC,uDAA3BoB,EAAgBnB,EAAW,uCACrD,OAAQA,EAAOC,MACb,IJR0B,iBISxB,OAAOgB,OAAOC,OAAO,GAAIlB,EAAOG,QAAQuB,YAC1C,IJT4B,mBIU1B,OAAOT,OAAOC,OAAO,GAAIC,GAC3B,QACE,OAAOpB,ICZE4B,cAAgB,CAC7B7B,WACAU,UACAC,UACAO,UACAU,eCTaE,cACXC,EAEAC,OAAOC,8BAAgCD,OAAOC,gC,uOCwBrCC,EAAa,SAAAvB,GAAO,MAAK,CACpCR,KP3ByB,cO4BzBE,QAAS,CACPM,aC7BSwB,EAAgB,SAAAlC,GAAK,OAAIA,EAAM2B,WAAa3B,EAAM2B,WAAa,I,kBCKtEQ,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,MAAO,IACPC,OAAQ,IAEVA,OAAQ,CACNC,OAAQJ,EAAMK,QAAQ,IAExBC,OAAQ,CACNH,OAAQ,OAKNI,EAAa,CAKjB,CACEC,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,SAILC,EAAc,CAClB,CACEF,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,OAET,CACED,MAAO,IACPC,MAAO,QAILE,EAAa,CACjB,CACEH,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,GACPC,MAAO,MAET,CACED,MAAO,IACPC,MAAO,QA2IX,IC9RaG,EDmSEC,aALS,SAAAlD,GAEtB,MAAO,CAAE2B,WADUO,EAAclC,MAIK,CAACmD,cFxPZ,SAAAxB,GAAU,MAAK,CAC1CzB,KPvC4B,iB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","file":"static/js/main.1f6b98bb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bugs2020.bfb2339d.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAeCAYAAAAl+Z4RAAABhWlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AYht+mSkVaHOwg6pChOlkQFXGUViyChdJWaNXB5NI/aNKQpLg4Cq4FB38Wqw4uzro6uAqC4A+Ik6OToouU+F1SaBHjHcc9vPe9L3ffAUKzylSzZxJQNctIJ2JiLr8qBl4hwI8QzRGJmXoys5iF5/i6h4/vd1Ge5V335wgpBZMBPpF4numGRbxBPLtp6Zz3icOsLCnE58QTBl2Q+JHrsstvnEsOCzwzbGTTceIwsVjqYrmLWdlQiWeII4qqUb6Qc1nhvMVZrdZZ+578hcGCtpLhOq1RJLCEJFIQIaOOCqqwEKVdI8VEms5jHv5hx58il0yuChg5FlCDCsnxg//B796axekpNykYA3pfbPtjDAjsAq2GbX8f23brBPA/A1dax19rAnOfpDc6WuQIGNgGLq47mrwHXO4AQ0+6ZEiO5KclFIvA+xl9Ux4YvAX619y+tc9x+gBkqVfLN8DBITBeoux1j3f3dfft35p2/34AGvJyhHk4EvcAAAAGYktHRABZABQAQk+9PdUAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfkAgMNGTCcdQVdAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAA3FJREFUOMuNlE9MI3UUx78zv44FjFiKbKCkJF1Mjexh2dl48A8BORJxOVUvEzkJp83GQPRgvFAOXkiJzRol4UJCMNEgIRABUzEVGnRTLMn+obFr2ABuagvTwbYzbWeeByg7RWr7Pf5+v/f5vt97Lw+4RD6fDwBemZube297e/vT5eXl2z09PeLk5CT+VxMTExgdHX03FAr9enJyotMzFeLxOC0uLv40PDzcWRJks9nQ1tYGAM/7/f4vZFl+SkQa/VdPiEhdX1//XZKkHgAcAGBwcPCKz+f7ZGdn50DXT01frKsjIvrKFHx8dvY9EVE+n1cDgcC+1+v9yOJ0Oq+5XK47ra2t9TzPAwDkdBoAPjQnenZ2CwClUikjk8k8zefzjwAARITp6elvotHoH1RBsiwfzs7OLhAR+vr6nll0d3fjy7t35yoBIpHIGoB+q9UKAOCLgGAw+Jzr6tXXUEE2m+262+1mDoej9KKzs/P1SCRSKQHKZrOFqampX4rm5xlIkvR+U1OTVimDmpoaJorijZGRkZslAIfD8ZbdbudRhURRZG63+3MAp33jOQae518mIguqk7Wjo+PtgYGBW6eOHIExpmUymZMqAdB1HV1dXW/wAGAYBjiOSySTSaHaeE3TIMvyX+d/VlX1nqIoVQEURckREcbGxkLngN3d3d8KhUJV9sfHx/F0Op0AcP8cMD4+HmKMVVXE+vp6ezKZfAJA4U1FEYiIqgE0NDTUGoaheb1emB0LhmFwVRbR4nQ6rw0NDTWbB6dOURQA0CtF5/N5jef5egBOM+BvIlLD4XCqEiAajfJnu4OZAQ/+fPz4h0QiYc9ms2WzKBQK+sHBgaCcprtdMvsPHj78jOM4xGKxsv08OjpSAWB/f3+6t7dXY+bLra2thCiKLkEQbjY2NuZqa2vZxQnc3Ny0chyHH9fWPpifn09eZvLCwsJCPBgMGhd3QSwWy6ysrJDf758vbmV2CSDX0tLyj8vlekdRlFRzc3NN8SIcDltUVc1JktQNIFsOAE3T7rW3t98QBOE6gJzdbuc2NjbUXC4n7O3tfb20tPRd8W3ZwZEk6SWPx3PfYrFcISKDMcanUqk9j8fzatG9ZCNd1MzMTKK/v/9NXdezjDGe4ziEQiGPObjsF8xdOzw8/FYUxcbV1dWPA4HAz/F4vOTBv5zvKdhA62boAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpSIVQTuIOGSoThZERXQrVSyChdJWaNXB5NIvaNKQpLg4Cq4FBz8Wqw4uzro6uAqC4AeIk6OToouU+L+k0CLGg+N+vLv3uHsHCI0KU82uCUDVLCMVj4nZ3KoYeIUAP4KYw4DETD2RXszAc3zdw8fXuwjP8j735+hT8iYDfCJxlOmGRbxBPLNp6Zz3iUOsJCnE58TjBl2Q+JHrsstvnIsOCzwzZGRS88QhYrHYwXIHs5KhEk8ThxVVo3wh67LCeYuzWqmx1j35C4N5bSXNdZojiGMJCSQhQkYNZVRgIUKrRoqJFO3HPPzDjj9JLplcZTByLKAKFZLjB/+D392ahalJNykYA7pfbPtjFAjsAs26bX8f23bzBPA/A1da219tALOfpNfbWvgI6N8GLq7bmrwHXO4AQ0+6ZEiO5KcpFArA+xl9Uw4YvAV619zeWvs4fQAy1NXyDXBwCIwVKXvd4909nb39e6bV3w9v4HKm51QXzgAAAAZiS0dEAFkAFABCT7091QAAAAlwSFlzAAAN1wAADdcBQiibeAAAAAd0SU1FB+QCAww7IVC1CbgAAAJ2SURBVCjPjZO/TxNhGMe/d/e+LXdHbWkp10IbkDKUK9AghDioiUNjYsBEnViZZHTCRBf9Bxx1IsZAdNCYqIvWhISaOKASalpwqIFALQVOKOWOwv1yuTMaQ/RZvnnffD/v8+PNA5wcs94eogKYxX9EK4ARACKAocSkZGbeDdqJSckEMOTcjwAIuwDraJiX6cfeqVhOSNEiAMbSLQYAHGWEFC32TsVyvEwXnES/4MHTVyPxWCbsSU7E2wFkxQ7eBACxgzcAZJMT8WgsE/Z0jUlRAN0AwDhwUEjRxeREvD2U9hNDM00icJxbnntWlmrGyvT6d62gywBUFx5yHsqeeyL7dhZrxqmESPwJkdv+vHccPhPwGIemOTeWrwPIALABfGIAzCQmpXFLt1mxo0lnOIbe5i3z0Yst1rwnM+aRZXFelgWASk7R1XKDspSxSg+qTxlvD1EvPOwX3BIbyrGRv18i0fMhLX6pTVh/s6VVcoowcDNhNIU8xPXN3/iiceYPS2ZEu0/J13C0qxstSR+VzgaNll6fFwCCj9fInWttVnZTJ/VVTa9+2OX2vh5Y22/rz/7q+eLLAd/BxqHVHOMZ27JtrXrE7pdUo3XQT96PF//o2Z3ovpCi8/23uoLNcZ4QgQMROKLk941Q3ykqRpsYb4BygbRAauWDy/q2dReA7v5zX+eoFAml/VRZqhlzY/l6JacYbcMBbyWn6HNX8nVlqWaE0n7SOSpFAKQAwB1AafVVtQIguva6ugngulpuLACAWm5QAJmV6fXnnaPHEcf37Xd457CoDy8XN7oBFAAkWcpYAFhHba2gy8uFjZQD7vxrUWacrZo5yfAT7Nr+OBIJPnoAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/background_water.a3caee81.png\";","import { ADD_MEASURE, RESET_MEASURE } from \"../actionTypes\";\n\n// TODO - cap size here? pop from front if > than x\n\nconst measures = (state = [], action) => {\n    switch (action.type) {\n      case ADD_MEASURE:\n        const { measure } = action.payload;        \n        return [\n          ...state.slice(Math.max(state.length - 100, 0)), // trim to last 100\n          measure\n        ]   \n      case RESET_MEASURE:\n        return []; // reset to initial state\n      default:\n        return state;\n    }\n  }\n\n  export default measures;","export const ADD_MEASURE = \"ADD_MEASURE\";\nexport const RESET_MEASURE = \"RESET_MEASURE\";\nexport const ADD_SPECIES_COUNT = \"ADD_SPECIES_COUNT\";\nexport const RESET_SPECIES_COUNT = \"RESET_SPECIES_COUNT\";\nexport const SET_CONTROL = \"SET_CONTROL\";\nexport const SET_TRACKER = \"SET_TRACKER\";\nexport const SET_PARAMETERS = \"SET_PARAMETERS\";\nexport const RESET_PARAMETERS = \"RESET_PARAMETERS\";\n","import { ADD_SPECIES_COUNT, RESET_SPECIES_COUNT } from \"../actionTypes\";\n\n// TODO - cap size here? pop from front if > than x\n\nconst species = (state = [], action) => {\n    switch (action.type) {\n      case ADD_SPECIES_COUNT:\n        return [\n          ...state.slice(Math.max(state.length - 100, 0)),\n          action.payload.species\n        ]\n      case RESET_SPECIES_COUNT:\n        return []; // reset to initial state\n      default:\n        return state;\n    }\n  }\n\n  export default species;","import { SET_CONTROL } from \"../actionTypes\";\n\n// set initial state\nconst control = (state = \"PLAY\", action) => {\n    switch (action.type) {\n      case SET_CONTROL:\n        return action.payload.control;\n      default:\n        return state;\n    }\n  }\n\n  export default control;","import { SET_TRACKER } from \"../actionTypes\";\n\n// init value\nconst initTracker = {\n  ticks: 0,\n  bugs: 0,\n  algae: 0,\n  totalBugs: 10,\n  totalSpecies: 10\n}\n\nconst tracker = (state = initTracker, action) => {\n  switch (action.type) {\n    case SET_TRACKER:\n      return Object.assign({}, action.payload.tracker);\n    default:\n      return state;\n  }\n}\n\nexport default tracker;","import { SET_PARAMETERS, RESET_PARAMETERS } from \"../actionTypes\";\n\n// init value\nconst initParameters = {\n  maxBugs: 200,\n  breedingCost: 100,\n  maxAlgae: 800,\n  algaeBreedThreshold: 100,\n  sampleInterval: 100, // number of ticks before counting species\n  mutationRate: 20, // 1 in n chance of mutation taking place, lower the number, higher the rate\n}\n\nconst parameters = (state = initParameters, action) => {\n  switch (action.type) {\n    case SET_PARAMETERS:\n      return Object.assign({}, action.payload.parameters);\n    case RESET_PARAMETERS:\n      return Object.assign({}, initParameters);\n    default:\n      return state;\n  }\n}\n\nexport default parameters;","import { combineReducers } from 'redux';\nimport measures from './measures';\nimport species from './species';\nimport control from './control';\nimport tracker from './tracker';\nimport parameters from './parameters';\n\nexport default combineReducers({\n  measures,\n  species,\n  control,\n  tracker,\n  parameters\n});\n","import { createStore } from \"redux\";\nimport rootReducer from \"./reducers\";\n\nexport default createStore(\n    rootReducer,\n    // this allows use of chrome redux devtool, if available\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n);","import { \n  ADD_MEASURE, RESET_MEASURE, \n  ADD_SPECIES_COUNT, RESET_SPECIES_COUNT,\n  SET_CONTROL,\n  SET_TRACKER, \n  SET_PARAMETERS, RESET_PARAMETERS \n} from \"./actionTypes\";\n\nexport const addMeasure = measure => ({\n  type: ADD_MEASURE,\n  payload: {\n    measure\n  }\n});\n\nexport const resetMeasure = () => ({\n  type: RESET_MEASURE\n});\n\nexport const addSpeciesCount = species => ({\n  type: ADD_SPECIES_COUNT,\n  payload: {\n    species\n  }\n});\n\nexport const resetSpeciesCount = () => ({\n  type: RESET_SPECIES_COUNT\n});\n\nexport const setControl = control => ({\n  type: SET_CONTROL,\n  payload: {\n    control\n  }\n});\n\nexport const setTracker = tracker => ({\n  type: SET_TRACKER,\n  payload: {\n    tracker\n  }\n});\n\nexport const setParameters = parameters => ({\n  type: SET_PARAMETERS,\n  payload: {\n    parameters\n  }\n});\n\nexport const resetParameters = () => ({\n  type: RESET_PARAMETERS\n});\n","export const getMeasures = state => state.measures ? state.measures : [];\nexport const getSpecies = state => state.species ? state.species : [];\nexport const getControl = state => state.control ? state.control : {};\nexport const getTracker = state => state.tracker ? state.tracker : {};\nexport const getParameters = state => state.parameters ? state.parameters : {};\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport { setParameters, resetParameters } from '../../redux/actions';\nimport { getParameters } from \"../../redux/selectors\";\nimport Slider from '@material-ui/core/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 250,\n    margin: 20\n  },\n  margin: {\n    height: theme.spacing(3),\n  },\n  button: {\n    margin: 5\n  }\n}));\n\n// TODO - could generate these programmatically\nconst largeMarks = [\n  // {\n  //   value: 0,\n  //   label: '0',\n  // },\n  {\n    value: 100,\n    label: '100',\n  },\n  {\n    value: 200,\n    label: '200',\n  },\n  {\n    value: 300,\n    label: '300',\n  },\n  {\n    value: 400,\n    label: '400',\n  },\n  {\n    value: 500,\n    label: '500',\n  },\n  {\n    value: 600,\n    label: '600',\n  },\n  {\n    value: 700,\n    label: '700',\n  },\n  {\n    value: 800,\n    label: '800',\n  },\n  {\n    value: 900,\n    label: '900',\n  },\n  {\n    value: 1000,\n    label: '1000',\n  },\n];\n\nconst mediumMarks = [\n  {\n    value: 100,\n    label: '100',\n  },\n  {\n    value: 150,\n    label: '150',\n  },\n  {\n    value: 200,\n    label: '200',\n  },\n  {\n    value: 250,\n    label: '250',\n  },\n  {\n    value: 300,\n    label: '300',\n  },\n  {\n    value: 350,\n    label: '350',\n  },\n  {\n    value: 400,\n    label: '400',\n  },\n  {\n    value: 450,\n    label: '450',\n  },\n  {\n    value: 500,\n    label: '500',\n  },\n];\n\nconst smallMarks = [\n  {\n    value: 10,\n    label: '10',\n  },\n  {\n    value: 20,\n    label: '20',\n  },\n  {\n    value: 30,\n    label: '30',\n  },\n  {\n    value: 40,\n    label: '40',\n  },\n  {\n    value: 50,\n    label: '50',\n  },\n  {\n    value: 60,\n    label: '60',\n  },\n  {\n    value: 70,\n    label: '70',\n  },\n  {\n    value: 80,\n    label: '80',\n  },\n  {\n    value: 90,\n    label: '90',\n  },\n  {\n    value: 100,\n    label: '100',\n  },\n];\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\n// maxBugs: 200,\n// breedingCost: 100,\n// maxAlgae: 800,\n// algaeBreedThreshold: 100,\n\nfunction Parameters(props) {\n\n  const classes = useStyles();\n\n  // clone for local adjustment, copy back to redux parameters if saved\n  const [params, setParams] = useState(props.parameters);\n\n  // TODO - consolidate functions, needless repetition here\n  const handleMaxBugsChange = (event, newValue) => {\n    var newParams = Object.assign({}, params);\n    newParams.maxBugs = newValue;\n    setParams(newParams);\n  };\n\n  const handleBreedingCostChange = (event, newValue) => {\n    var newParams = Object.assign({}, params);\n    newParams.breedingCost = newValue;\n    setParams(newParams);\n  };\n\n  const handleMaxAlgaeChange = (event, newValue) => {\n    var newParams = Object.assign({}, params);\n    newParams.maxAlgae = newValue;\n    setParams(newParams);\n  };\n\n  const handleAlgaeBreedThresholdChange = (event, newValue) => {\n    var newParams = Object.assign({}, params);\n    newParams.algaeBreedThreshold = newValue;\n    setParams(newParams);\n  };\n\n  const handleMutationRateChange = (event, newValue) => {\n    var newParams = Object.assign({}, params);\n    newParams.mutationRate = newValue;\n    setParams(newParams);\n  };\n\n  // reset parameters to defaults\n  const reset = () => {\n    props.resetParameters(); // reset redux parameters\n    // TODO - await? reset to last values, 2nd click shows actual values\n    setParams(props.parameters); // update local component state\n  };\n\n  return (\n    <div className={classes.root}>\n\n      <Typography id=\"max-bugs-slider\" gutterBottom>\n        Maximum Bug Population\n      </Typography>\n      <Slider\n        value={params.maxBugs}\n        onChange={handleMaxBugsChange}\n        aria-labelledby=\"max-bugs-slider\"\n        step={10}\n        marks={mediumMarks}\n        min={50}\n        max={300}\n      />\n\n      <div className={classes.margin} />\n      <Typography id=\"bug-breed-cost-slider\" gutterBottom>\n        Bug Breeding Cost (Energy)\n      </Typography>\n      <Slider\n        value={params.breedingCost}\n        onChange={handleBreedingCostChange}\n        aria-labelledby=\"bug-breed-cost-slider\"\n        step={10}\n        marks={largeMarks}\n        min={0}\n        max={500}\n      />\n\n      <div className={classes.margin} />\n      <Typography id=\"max-algae-slider\" gutterBottom>\n        Maximum Algae Population\n      </Typography>\n      <Slider\n        value={params.maxAlgae}\n        onChange={handleMaxAlgaeChange}\n        aria-labelledby=\"max-algae-slider\"\n        step={50}\n        marks={largeMarks}\n        min={400}\n        max={1000}\n      />\n\n      <div className={classes.margin} />\n      <Typography id=\"algae-breed-threshold-slider\" gutterBottom>\n        Algae Breeding Threshold (Energy)\n      </Typography>\n      <Slider\n        value={params.algaeBreedThreshold}\n        onChange={handleAlgaeBreedThresholdChange}\n        aria-labelledby=\"algae-breed-threshold-slider\"\n        step={10}\n        marks={mediumMarks}\n        min={50}\n        max={300}\n      />\n\n      <div className={classes.margin} />\n      <Typography id=\"algae-mutation-rate-slider\" gutterBottom>\n        Mutation Chance (1 in n)\n      </Typography>\n      <Slider\n        value={params.mutationRate}\n        onChange={handleMutationRateChange}\n        aria-labelledby=\"algae-mutation-rate-slider\"\n        step={1}\n        marks={smallMarks}\n        min={10}\n        max={100}\n      />\n\n      <div className={classes.margin} />\n      <Button className={classes.button} variant=\"contained\" onClick={() => { props.setParameters(params); props.toggle(false); }}>Save</Button>\n      <Button className={classes.button} variant=\"contained\" onClick={() => { reset(); }}>Reset</Button>\n      <Button className={classes.button} variant=\"contained\" onClick={() => { props.toggle(false); }}>Close</Button>\n    </div>\n  );\n\n};\n\nconst mapStateToProps = state => {\n  const parameters = getParameters(state);\n  return { parameters };\n};\n\nexport default connect(mapStateToProps, {setParameters, resetParameters})(Parameters);\n","import ParametersComponent from './Parameters';\nexport const Parameters = ParametersComponent;","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport TitleImage from '../../assets/bugs2020.png';\n\nconst useStyles = makeStyles({\n  card: {\n    maxWidth: 1000,\n    maxHeight: 500,\n    margin: 5,\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  content: {\n    width: \"80%\"\n  },\n  media: {\n    margin: 5,\n    height: 100,\n    width: 100\n  },\n});\n\nexport default function Title() {\n\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.card}>\n      <CardMedia\n        className={classes.media}\n        image={TitleImage}\n        title=\"Bugs 2020\"\n      />\n      <CardContent className={classes.content}>\n        <Typography variant=\"body1\" color=\"textSecondary\" component=\"p\">\n          Exploring machine learning and evolutionary adaptation by observing synthetic\n          creatures ('bugs') in a dynamic environment.\n        </Typography>\n      </CardContent>\n    </Card>\n  );\n\n}\n","import TitleComponent from './Title';\nexport const Title = TitleComponent;","import { Viewport } from \"pixi-viewport\";\nimport { PixiComponent } from \"@inlet/react-pixi\";\n\n// see - https://codesandbox.io/s/elated-liskov-pdcd6\n\nexport default PixiComponent(\"Viewport\", {\n  create: props => {\n    const viewport = new Viewport({\n      // screenWidth: 1000,\n      // screenHeight: 500,\n      screenWidth: window.innerWidth,\n      screenHeight: window.innerHeight,\n      worldWidth: 1000,\n      worldHeight: 500,\n      // ticker: props.app.ticker,\n      // interaction: props.app.renderer.plugins.interaction // the interaction module is important for wheel to work properly when renderer.view is placed or scaled\n    });\n\n    console.log(props)\n    // viewport.on(\"drag-start\", () => console.log(\"drag-start\"));\n    // viewport.on(\"drag-end\", () => console.log(\"drag-end\"));\n\n    viewport\n      .drag()\n      .pinch()\n      .wheel()\n      .decelerate();\n\n    //viewport.scaled = 30;\n    return viewport;\n  },\n  applyProps: (instance, oldProps, newProps) => {\n    console.log(\"applyProps\");\n  },\n  didMount: () => {\n    console.log(\"didMount\");\n  },\n  willUnmount: () => {\n    console.log(\"willUnmount\");\n  }\n});","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n// import { connect } from 'react-redux';\n// import { getBug } from \"../../redux/selectors\";\n// import Card from '@material-ui/core/Card';\nimport Modal from '@material-ui/core/Modal';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: 300,\n    flexGrow: 1,\n    minWidth: 300,\n    transform: 'translateZ(0)',\n    // The position fixed scoping doesn't work in IE 11.\n    // Disable this demo to preserve the others.\n    '@media all and (-ms-high-contrast: none)': {\n      display: 'none',\n    },\n  },\n  modal: {\n    display: 'flex',\n    padding: theme.spacing(1),\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function Bug(bug) {\n\n  const classes = useStyles();\n  const rootRef = React.useRef(null);\n\n  return (\n    <Modal\n      disablePortal\n      disableEnforceFocus\n      disableAutoFocus\n      open\n      aria-labelledby=\"Bug\"\n      aria-describedby=\"Bug details\"\n      className={classes.modal}\n      container={() => rootRef.current}\n    >\n      <div className={classes.paper}>\n        <p id=\"server-modal-description\">{bug}</p>\n      </div>\n    </Modal>\n  );\n\n};\n","/**\n* -----------------------------------------------\n* Contact function - have two sprites connected?  \n* see https://github.com/kittykatattack/learningPixi#the-hittestrectangle-function\n* -----------------------------------------------\n*/\nexport function contact(r1, r2) {\n\n    //Define the variables we'll need to calculate\n    let hit, combinedHalfWidths, combinedHalfHeights, vx, vy;\n  \n    //hit will determine whether there's a collision\n    hit = false;\n  \n    // console.log(\"h\", r1.height, r2.height);\n  \n    //Find the center points of each sprite\n    r1.centerX = r1.x + r1.width / 2;\n    r1.centerY = r1.y + r1.height / 2;\n    r2.centerX = r2.x + r2.width / 2;\n    r2.centerY = r2.y + r2.height / 2;\n  \n    //Find the half-widths and half-heights of each sprite\n    r1.halfWidth = r1.width / 2;\n    r1.halfHeight = r1.height / 2;\n    r2.halfWidth = r2.width / 2;\n    r2.halfHeight = r2.height / 2;\n  \n    //Calculate the distance vector between the sprites\n    vx = r1.centerX - r2.centerX;\n    vy = r1.centerY - r2.centerY;\n  \n    //Figure out the combined half-widths and half-heights\n    combinedHalfWidths = r1.halfWidth + r2.halfWidth;\n    combinedHalfHeights = r1.halfHeight + r2.halfHeight;\n  \n    //Check for a collision on the x axis\n    if (Math.abs(vx) < combinedHalfWidths) {\n  \n      //A collision might be occurring. Check for a collision on the y axis\n      if (Math.abs(vy) < combinedHalfHeights) {\n  \n        //There's definitely a collision happening\n        hit = true;\n      } else {\n  \n        //There's no collision on the y axis\n        hit = false;\n      }\n    } else {\n  \n      //There's no collision on the x axis\n      hit = false;\n    }\n  \n    //`hit` will be either `true` or `false`\n    return hit;\n  };\n  \n  \n  // not used yet\n  export function wrap(item, xbounds, ybounds, width, height) {\n    if (item.x < xbounds) {\n      item.x += width;\n    }\n    else if (item.x > xbounds + width) {\n      item.x -= width;\n    }\n    if (item.y < ybounds) {\n      item.y += height;\n    }\n    else if (item.y > ybounds + height) {\n      item.y -= height;\n    }\n  }","import React from 'react';\nimport { connect } from \"react-redux\";\nimport { addMeasure, addSpeciesCount, resetMeasure, resetSpeciesCount, setControl, setTracker } from '../../redux/actions';\nimport { getControl, getParameters } from '../../redux/selectors';\nimport Card from '@material-ui/core/Card';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Stage, Container, Text, withPixiApp, Sprite, useApp } from '@inlet/react-pixi';\nimport * as PIXI from \"pixi.js\";\nimport { ReactViewport } from '../ReactViewport';\nimport uuidv4 from 'uuid/v4';\nimport { Bug } from '../Bug';\n\n// project components\nimport { contact } from './physics';\n\n// images\nimport BugImage from '../../assets/flatworm.png';\nimport AlgaeImage from '../../assets/algae_small.png';\nimport BackgroundImage from '../../assets/background_water.png';\n\n/**\n* -----------------------------------------------\n* Component styles\n* -----------------------------------------------\n*/\nconst useStyles = makeStyles({\n  card: props => ({\n    maxWidth: 1000,\n    maxHeight: 500,\n    backgroundImage: 'url(' + BackgroundImage + ')',\n    // TODO - fix this, use props, should work, see https://material-ui.com/styles/basics/\n    // maxWidth: props.width,\n    // maxHeight: props.height,\n    margin: 5,\n    display: 'flex',\n    flexDirection: 'row'\n  })\n});\n\n/**\n* -----------------------------------------------\n* tracker, for stats, local copy to make redux management easier\n* update redux copy for display\n* -----------------------------------------------\n*/\nvar tracker = {\n  ticks: 0,\n  bugs: 0,\n  algae: 0,\n  speciesCounts: {}, // support constant tracking of population by species\n  totalBugs: 10, // init value\n  totalSpecies: 10 // init value\n}\n\n/**\n* -----------------------------------------------\n* Config\n* -----------------------------------------------\n*/\nconst config = {\n  // these are starting values\n  bugs: 5,\n  algae: 500, // max = 800\n\n  properties: {\n    position: true,\n    rotation: true,\n    scale: false,\n    uvs: false,\n    alpha: false,\n  },\n\n  listeners: [],\n  onChange: function (prop, val) { this.listeners.forEach(l => l(prop, val)) },\n}\n\n/**\n* -----------------------------------------------\n* Settings Component\n* -----------------------------------------------\n*/\nclass Settings extends React.PureComponent {\n\n  state = { ...config.properties, bugs: config.bugs, algae: config.algae, changed: false }\n\n  componentDidMount() {\n    config.listeners.push(this.onChange)\n  }\n\n  onChange = (prop, val) => {\n    this.setState({ [prop]: val, changed: true })\n\n    // creates new ParticleContainer as properties cannot be changed over time\n    clearTimeout(this.changeTimeout)\n    this.changeTimeout = setTimeout(() => this.setState({ changed: false }), 0)\n  }\n\n  render() {\n    return this.state.changed ? null : this.props.children(this.state)\n  }\n};\n\n/**\n* -----------------------------------------------\n* Bug Component\n* -----------------------------------------------\n*/\nconst BugSprite = props => (\n  <Sprite {...props}\n    image={BugImage}\n    anchor={0.5}\n    overwriteProps={true}\n    ignoreEvents={true}\n    interactive={true}\n    pointerdown={() => { // respond to click\n      // TODO - create a popup or something on screen - this is to browser console\n      console.log(props);\n      // <Bug props/>\n      // render()\n    }}\n  />\n);\n\n// for algae positioning on birth\n// TODO - use PI to derive angle rathen than pseudo grid system here\n// const positions = [[-15,-15],[-15,0],[15,15],[0,-15],[0,15],[15,-15],[15,0],[15,15]];\n// const positions = [[-12,-12],[-12,0],[12,12],[0,-12],[0,12],[12,-12],[12,0],[12,12]];\nconst positions = [[-10, -10], [-10, 0], [10, 10], [0, -10], [0, 10], [10, -10], [10, 0], [10, 10]];\n\n/**\n* -----------------------------------------------\n* Algae Component\n* -----------------------------------------------\n*/\nconst AlgaeSprite = props => (\n  <Sprite {...props}\n    image={AlgaeImage}\n    anchor={0.5}\n    overwriteProps={true}\n    ignoreEvents={true}\n  />\n);\n\n/**\n* -----------------------------------------------\n* Message to display when all dead\n* -----------------------------------------------\n*/\nconst notice = <Text\n  text=\"All Bugs Dead\"\n  anchor={0}\n  x={380}\n  y={250}\n  style={new PIXI.TextStyle({\n    fontSize: 30,\n    fontFamily: 'Courier',\n    fontWeight: 'bold',\n    fill: '#ff0000'\n  })}\n/>\n\n/**\n* -----------------------------------------------\n* Init bugs array\n* -----------------------------------------------\n*/\nfunction initBugs(count) {\n  var bugs = [...Array(count)].map(() => ({\n    speed: Math.ceil((2 + Math.random() * 4) * 0.5),\n    turningSpeed: Math.random() - 0.8,\n    direction: Math.random() * Math.PI * 2,\n    tint: Math.round(Math.random() * 0xFFFFFF),\n    // TODO - width/height from props\n    x: Math.random() * 1000,\n    y: Math.random() * 500,\n    _s: 0.6, // base speed - could add to parameters\n    rotation: 0,\n    // w/h used for collision detection, and controls sprite size\n    width: 15,\n    height: 30,\n    energy: 400,\n    cycles: 0, // track age in cycles\n    breedThreshold: Math.floor(Math.random() * 1000) + 1000,\n    // info to allow geneology reports\n    geneology: {\n      id: uuidv4(),\n      parent: 'SEED', // track parent - this is initial SEED\n      children: [] // empty to start\n    }\n  }));\n\n  // inititialise species population tracker\n  bugs.forEach((bug) => {\n    tracker.speciesCounts[bug.tint] = 1;\n  });\n\n  return bugs;\n}\n\n/**\n* -----------------------------------------------\n* Init algae array\n* -----------------------------------------------\n*/\nfunction initAlgae(count) {\n  var algae = [...Array(count)].map(() => ({\n    // TODO - width/height from props\n    x: Math.random() * 1000,\n    y: Math.random() * 500,\n    width: 12,\n    height: 12,\n    energy: Math.floor(Math.random() * 50) + 50 // spread initial values, avoid all breeding together\n  }));\n  return algae;\n}\n\n\n/**\n* -----------------------------------------------\n* Batch Component\n* -----------------------------------------------\n*/\nconst Batch = withPixiApp(class extends React.PureComponent {\n  time = 0\n  bounds = null\n  state = {\n    bugs: [],\n    algae: [],\n    bugCount: 0,\n    algaeCount: 0\n  };\n\n  // see https://larry-price.com/blog/2018/06/27/how-to-use-getderivedstatefromprops-in-react-16-dot-3-plus/\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (prevState.bugCount === nextProps.bugCount && prevState.algaeCount === nextProps.algaeCount) {\n      return prevState\n    }\n\n    var algae = initAlgae(nextProps.algaeCount);\n    var bugs = initBugs(nextProps.bugCount);\n\n    return {\n      bugs: bugs,\n      algae: algae,\n      bugCount: bugs.length,\n      algaeCount: algae.length\n    }\n  }\n\n  componentDidMount() {\n    const padding = 10; // 20\n\n    this.bounds = new PIXI.Rectangle(\n      -padding,\n      -padding,\n      // were being read as strings - so = 80020 not 820!\n      Number(this.props.app.screen.width) + padding,\n      Number(this.props.app.screen.height) + padding\n    );\n\n    this.props.app.ticker.add(this.tick);\n  }\n\n  componentWillUnmount() {\n    this.props.app.ticker.remove(this.tick);\n  }\n\n  // remove items without energy - 'deaths'\n  deaths = (items) => {\n    items.forEach((item, i) => {\n      if (item.energy === 0) {\n        items.splice(i, 1); // other is at position i\n        tracker.speciesCounts[item.tint]--;\n      }\n    });\n    return items;\n  }\n\n  // TODO - deconstruct into smaller functions\n  bugLogic = (vbugs) => {\n    var bugs = this.deaths(vbugs); // first, remove any bugs with 0 energy\n\n    // BUG PROCESSING\n    bugs.forEach((item) => {\n      // BREED\n      if (item.energy >= item.breedThreshold && bugs.length < this.props.parameters.maxBugs) {\n        tracker.totalBugs++;\n        item.energy = Math.round(item.energy / 2) - this.props.parameters.breedingCost; // half, plus breeding cost\n        var offspring = Object.assign({}, this.evolve(item)); // empty object to receive contents of item\n        offspring.direction = Math.random() * Math.PI * 2; // new heading\n        // geneology tracking\n        // TODO - fix this, values being duplicated\n        var uuid = uuidv4();\n        item.geneology.children.push(uuid);\n        // object.assign does not do a deep copy\n        offspring.geneology = {\n          id: uuid,\n          parent: item.geneology.id,\n          children: [] // create blank array for child\n        }\n        offspring.cycles = 0; // age = 0\n        bugs.push(offspring); // add adjusted copy\n        tracker.speciesCounts[offspring.tint] ? tracker.speciesCounts[offspring.tint]++ : tracker.speciesCounts[offspring.tint] = 1; // track new births\n      }\n\n      // EAT BUGS\n      bugs.forEach((other) => {\n        // don't test against self, based on position of old value\n        if (item.tint !== other.tint && item.x !== other.x && item.y !== other.y) {\n          if (contact(item, other)) {\n            item.direction += (Math.random() - 0.5) * 0.75; // avoidance\n            // consume the contacted bug\n            if (other.energy > 0) {\n              item.energy += Math.min(500, other.energy); // take what there is\n              other.energy = Math.max(0, other.energy - 500); // reduce to 0, or by 500\n            }\n          }\n        }\n      })\n\n      // EAT ALGAE\n      var eatenAlgae = this.state.algae;\n      eatenAlgae.forEach((other, i) => {\n        if (contact(item, other)) {\n          item.direction += (Math.random() - 0.5) * 0.75; // consume clump\n          // consume the contacted bug or algae\n          if (other.energy > 0) {\n            item.energy += Math.min(500, other.energy); // take what there is\n            other.energy = Math.max(0, other.energy - 500); // reduce to 0, or by 500, so eat algae in one go - faster\n          }\n        }\n      });\n      this.setState({ algae: eatenAlgae });\n\n      // MOVE \n      item.x = item.x + Math.sin(item.direction) * (item.speed * item._s);\n      item.y = item.y + Math.cos(item.direction) * (item.speed * item._s);\n      item.rotation = -item.direction + Math.PI;\n      item.direction = item.direction + item.turningSpeed * (Math.random() - 0.5) * 0.5;\n\n      // ENERGY LOSS\n      item.energy = Math.max(0, item.energy - (2 + Math.ceil(item.speed))); // slow energy loss with movement, will need to eat\n\n      // TRACK AGE\n      item.cycles++;\n    })\n\n    return (bugs);\n  }\n\n  // check if should evolve, make small adjustment if so\n  evolve = (item) => {\n    var offspring = Object.assign({}, item);\n    if (Math.floor(Math.random() * this.props.parameters.mutationRate) === 0) {  // 1 in n chance of a mutuation\n      tracker.totalSpecies++;\n      // TODO - check upper/lower colour bounds\n      offspring.tint = item.tint + Math.round(Math.random() * 0xFFFF) - 0x8888; // new colour to indicate change\n\n      // make one small change\n      var change = Math.round(Math.random() * 2);\n      switch (change) {\n        case 0:\n          offspring.turningSpeed = item.turningSpeed + (Math.random() * 0.2 - 0.1);\n          break;\n        case 1:\n          offspring.speed = item.speed + Math.floor(Math.random() * 4) - 2; // allow slow down too\n          break;\n        case 2:\n          offspring.breedThreshold += item.breedThreshold + Math.floor(Math.random() * 20) - 10; // variable breed speed, up or down\n          break;\n        default:\n          console.log(\"no change ...\", change);\n      }\n    }\n    return offspring;\n  }\n\n  algaeLogic = (items) => {\n    var algae = this.deaths(items); // first, check once over all items, remove any with 0 energy\n\n    // ALGAE PROCESSING\n    algae.forEach((item) => {\n      // BREED\n      // TODO - limit to edge algae, or perhaps sample pop if large, to speed processing\n      if (item.energy >= this.props.parameters.algaeBreedThreshold && algae.length < this.props.parameters.maxAlgae) {\n        var offspring = Object.assign({}, item); // empty object to receive contents of item\n\n        var index = Math.floor(Math.random() * positions.length);\n        // randomness creates drift from pure grid, lines reminisent of algae\n        offspring.x += positions[index][0] + Math.floor(Math.random() * 8) - 4;\n        offspring.y += positions[index][1] + Math.floor(Math.random() * 8) - 4;\n\n        // can push this into a function - used for bugs as well\n        if (offspring.x < this.bounds.x) {\n          offspring.x += this.bounds.width;\n        }\n        else if (offspring.x > this.bounds.x + this.bounds.width) {\n          offspring.x -= this.bounds.width;\n        }\n        if (offspring.y < this.bounds.y) {\n          offspring.y += this.bounds.height;\n        }\n        else if (offspring.y > this.bounds.y + this.bounds.height) {\n          offspring.y -= this.bounds.height;\n        }\n\n        // check overlap - if overlap, do not breed (do no add offpsring) until space\n        let isContact = false;\n        for (var i = 0; i < algae.length; i++) { // don't use foreach so can break\n          if (contact(offspring, algae[i])) {\n            isContact = true;\n            break;\n          }\n        }\n\n        // no overlap so create\n        if (!isContact) {\n          // only take energy away when space to breed\n          item.energy = Math.round(item.energy / 2); // half\n          offspring.energy = Math.round(item.energy / 2); // half\n          algae.push(offspring); // add adjusted copy\n        }\n      }\n\n      // PHOTOSYNTHESISE\n      // put a cap on energy stored based on breeding threshold - must have that much\n      item.energy = Math.min(this.props.parameters.algaeBreedThreshold, item.energy + 1);\n    })\n\n    return algae;\n  }\n\n  tick = () => {\n\n    this.setState(({ bugs, algae }) => ({\n      // not filtering - need to reach each for all to render\n      bugs: this.bugLogic(bugs, algae).map((item, i) => {\n        // perform basic movement operations here, causes rendering to take place\n\n        // clone item\n        var newItem = Object.assign({}, item);\n\n        // check bounds of environment not exceeded, wrap around if so\n        if (newItem.x < this.bounds.x) {\n          newItem.x += this.bounds.width;\n        }\n        else if (newItem.x > this.bounds.x + this.bounds.width) {\n          newItem.x -= this.bounds.width;\n        }\n        if (newItem.y < this.bounds.y) {\n          newItem.y += this.bounds.height;\n        }\n        else if (newItem.y > this.bounds.y + this.bounds.height) {\n          newItem.y -= this.bounds.height;\n        }\n\n        return { ...item, ...newItem };\n      })\n    }));\n\n    this.setState(({ algae }) => ({\n      algae: this.algaeLogic(algae)\n    }));\n\n    // stop processing, all dead\n    if (this.state.bugs.length === 0) {\n      this.props.app.ticker.stop();\n    };\n\n    tracker.ticks++;\n\n    // every nth tick, record bug volumes by species - not too oftem, will slow processing\n    if (tracker.ticks % this.props.parameters.sampleInterval === 0) {\n\n      // add population measures to redux store\n      let sample = {\n        cycle: tracker.ticks,\n        bugs: this.state.bugs.length,\n        algae: this.state.algae.length\n      };\n      this.props.addMeasure(sample);\n\n      // update redux tracker with local values\n      tracker.bugs = this.state.bugs.length;\n      tracker.algae = this.state.algae.length;\n      this.props.setTracker(tracker);\n\n      // periodically trim tracker species counts of 0 values\n      Object.entries(tracker.speciesCounts).forEach(([key, value]) => {\n        // should not need undefined test, not sure where undefined coming from\n        if (tracker.speciesCounts[key] === 0 || key === 'undefined') {\n          delete tracker.speciesCounts[key];\n        }\n      });\n\n      // normalise species counts into standard structure to make plotting easier\n      // const normal = Object.keys(counts).map((name) => {\n      const normal = Object.keys(tracker.speciesCounts).map((name) => {\n        return { species: name, count: tracker.speciesCounts[name] }\n      });\n\n      // wrap up species counts with a cycle indicator\n      const species = { cycle: tracker.ticks, counts: normal }\n\n      // add species counts to redux store\n      this.props.addSpeciesCount(species);\n    }\n\n    this.time += 0.1;\n  }\n\n  render() {\n    var valgae = this.state.algae.map(props => <AlgaeSprite {...props} />);\n    var vbugs = this.state.bugs.map(props => <BugSprite {...props} />);\n\n    var message =\n      \"        Cycle: \".concat(tracker.ticks)\n        .concat(\"\\n Current Bugs: \").concat(this.state.bugs.length)\n        .concat(\"\\nCurrent Algae: \").concat(this.state.algae.length)\n        .concat(\"\\n   Total Bugs: \").concat(tracker.totalBugs)\n        .concat(\"\\nTotal Species: \").concat(tracker.totalSpecies);\n\n    // show the 'ticks' on screen - cycle\n    var text = <Text\n      text={message}\n      anchor={0}\n      x={5}\n      y={5}\n      style={new PIXI.TextStyle({\n        fontSize: 14,\n        fontFamily: 'Courier',\n        fontWeight: 'bold',\n        fill: '#000080'\n      })}\n    />\n\n    // manage control buttons\n    // TODO - move into function\n    switch (this.props.control) {\n      case 'PLAY':\n        // prevent repeated start calls by testing started\n        if (!this.props.app.ticker.started) {\n          this.props.app.ticker.start();\n        }\n        break;\n      case 'PAUSE':\n        this.props.app.ticker.stop();\n        break;\n      case 'RESET':\n        // stop processing\n        this.props.app.ticker.stop();\n        // reset the algae and bugs\n        // this.setState({bugs: initBugs(config.bugs)}); // should use, but nested\n        // this.setState({algae: initAlgae(config.algae)}); // should use, but nested\n        this.state.bugs = initBugs(config.bugs);\n        this.state.algae = initAlgae(config.algae);\n        // reset measures redux array\n        this.props.resetMeasure();\n        // reset species redux array\n        this.props.resetSpeciesCount();\n        // reset tracker counts\n        // TODO - call function, avoid this hard coding of values\n        tracker.ticks = 0;\n        tracker.totalBugs = 10;\n        tracker.totalSpecies = 10;\n        // restart processing\n        this.props.app.ticker.start();\n        // set control value\n        this.props.setControl('PLAY'); // set running again\n        break;\n      default:\n        console.log(\"command not recognised ...\");\n    }\n\n    if (this.state.bugs.length > 0) {\n      return [...valgae, ...vbugs, text];\n    }\n    return [...valgae, ...vbugs, text, notice];\n  }\n});\n\n/**\n* -----------------------------------------------\n* Top Level World Component\n* -----------------------------------------------\n*/\nfunction Simulation(props) {\n\n  const classes = useStyles(props);\n  // const app = useApp();\n\n  // note passing functions to Batch component\n  return (\n    <Card className={classes.card}>\n      <Stage width={props.width} height={props.height} options={{ transparent: true }}>\n        {/* <ReactViewport app={app}> */}\n          <Settings>\n            {config => (\n              <Container properties={config}>\n                <Batch\n                  control={props.control}\n                  parameters={props.parameters}\n                  setControl={props.setControl}\n                  setTracker={props.setTracker}\n                  addMeasure={props.addMeasure}\n                  addSpeciesCount={props.addSpeciesCount}\n                  resetMeasure={props.resetMeasure}\n                  resetSpeciesCount={props.resetSpeciesCount}\n                  bugCount={config.bugs}\n                  algaeCount={config.algae} />\n              </Container>\n            )}\n          </Settings>\n        {/* </ReactViewport> */}\n      </Stage>\n    </Card>\n  );\n}\n\nconst mapStateToProps = state => {\n  const control = getControl(state);\n  const parameters = getParameters(state);\n  return { control, parameters };\n};\n\nexport default connect(\n  mapStateToProps,\n  { addMeasure, addSpeciesCount, resetMeasure, resetSpeciesCount, setControl, setTracker }\n)(Simulation);\n","import SimComponent from './Simulation';\nexport const Simulation = SimComponent;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getMeasures } from \"../../redux/selectors\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport { Line } from 'react-chartjs-2';\n\nconst useStyles = makeStyles({\n  card: {\n    maxWidth: 1000,\n    maxHeight: 300,\n    margin: 5\n  }\n});\n\nconst options = {\n  responsive: true,\n  animation: false,\n  scales: {\n    xAxes: [{\n      display: true,\n      type: 'linear',\n      position: 'bottom',\n      ticks: {\n        stepSize: 100\n      }\n    }],\n    yAxes: [\n      {\n        id: 'bugs',\n        position: 'left',\n        display: true\n      },\n      {\n        id: 'algae',\n        position: 'right',\n        display: true\n      }\n    ]\n  },\n  legend: {\n    display: true,\n    labels: {\n      fontColor: 'rgb(63, 63, 191, 0.9)'\n    }\n  },\n  layout: {\n    padding: {\n      left: 10,\n      right: 10,\n      top: 5,\n      bottom: 5\n    }\n  }\n}\n\nfunction SummaryChart({ measures }) {\n\n  const classes = useStyles();\n\n  var chartdata = {\n    datasets: [\n      {\n        label: \"Bugs\",\n        data: measures && measures.length ? measures.map((m) => { return { x: m.cycle, y: m.bugs } }) : [],\n        yAxisID: \"bugs\",\n        borderColor: 'rgba(191, 63, 63, 0.5)',\n        backgroundColor: 'rgba(191, 63, 63, 0.3)',\n        borderWidth: 1,\n        pointRadius: 1,\n        pointHoverRadius: 1\n      },\n      {\n        label: \"Algae\",\n        data: measures && measures.length ? measures.map((m) => { return { x: m.cycle, y: m.algae } }) : [],\n        yAxisID: \"algae\",\n        borderColor: 'rgba(0, 138, 0, 0.7)',\n        backgroundColor: 'rgba(0, 138, 0, 0.3)',\n        borderWidth: 1,\n        pointRadius: 1,\n        pointHoverRadius: 1\n      }\n    ]\n  }\n\n  return (\n    <Card className={classes.card}>\n      <Line\n        data={chartdata}\n        width={1000}\n        height={300}\n        options={options}\n      />\n    </Card>\n  );\n};\n\nconst mapStateToProps = state => {\n  const measures = getMeasures(state);\n  return { measures };\n};\n\nexport default connect(mapStateToProps)(SummaryChart);\n","import ChartComponent from './SummaryChart';\nexport const SummaryChart = ChartComponent;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { getSpecies } from \"../../redux/selectors\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport { Line } from 'react-chartjs-2';\nimport * as PIXI from \"pixi.js\";\n\nconst useStyles = makeStyles({\n  card: {\n    maxWidth: 1000,\n    maxHeight: 500,\n    margin: 5\n  }\n});\n\nconst options = {\n  responsive: true,\n  animation: false,\n  scales: {\n    xAxes: [{\n      display: true,\n      type: 'linear',\n      position: 'bottom',\n      ticks: {\n        stepSize: 100\n      }\n    }],\n    yAxes: [{\n      display: true,\n      position: 'left'\n    }]\n  },\n  legend: {\n    display: true,\n    labels: {\n      fontColor: 'rgb(63, 63, 191, 0.9)'\n    }\n  },\n  layout: {\n    padding: {\n      left: 10,\n      right: 10,\n      top: 5,\n      bottom: 5\n    }\n  }\n}\n\nfunction SpeciesChart({ species }) {\n\n  const classes = useStyles();\n\n  // species data needs to be pivoted from by cycle to by species to chart\n  // TODO - filter to top n species for efficiency\n  var chartData = [];\n  species.forEach(element => {\n    element.counts.forEach(entry => {\n      chartData[entry.species] ? chartData[entry.species].push({ x: element.cycle, y: entry.count }) : chartData[entry.species] = [{ x: element.cycle, y: entry.count }];\n    });\n  });\n\n  var datasets = Object.keys(chartData).map((name) => {\n    let colour = PIXI.utils.premultiplyTintToRgba(name, 0.5);\n    let hexcolour = [colour[0] * 0x255, colour[1] * 0x255, colour[2] * 0x255];\n    let borderColourString = 'rgba(' + hexcolour[0] + ',' + hexcolour[1] + ',' + hexcolour[2] + ', 0.9)';\n    let colourString = 'rgba(' + hexcolour[0] + ',' + hexcolour[1] + ',' + hexcolour[2] + ', 0.5)';\n    return {\n      label: name,\n      data: chartData[name],\n      borderColor: borderColourString,\n      backgroundColor: colourString,\n      borderWidth: 1,\n      pointRadius: 1,\n      pointHoverRadius: 1,\n      spanGaps: false\n    }\n  });\n\n  var chartdata = {\n    datasets: datasets\n  }\n\n  return (\n    <Card className={classes.card}>\n      <Line\n        data={chartdata}\n        width={1000}\n        height={500}\n        options={options}\n      />\n    </Card>\n  );\n};\n\nconst mapStateToProps = state => {\n  const species = getSpecies(state);\n  return { species };\n};\n\nexport default connect(mapStateToProps)(SpeciesChart);\n","import ChartComponent from './SpeciesChart';\nexport const SpeciesChart = ChartComponent;","import React from 'react';\nimport { connect } from 'react-redux';\nimport { setControl } from '../../redux/actions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport Button from '@material-ui/core/Button';\n\n// icons\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport RefreshIcon from '@material-ui/icons/Refresh';\n\nconst useStyles = makeStyles({\n  card: {\n    maxWidth: 1000,\n    maxHeight: 100,\n    margin: 5,\n    display: 'flex',\n    flexDirection: 'row'\n  },\n  button: {\n    margin: 5\n  }\n});\n\nfunction Controls(props) {\n\n  const classes = useStyles();\n\n  // TODO - statics not strings\n  return (\n    <Card className={classes.card}>\n      <Button className={classes.button} variant=\"contained\" onClick={() => { props.setControl('PAUSE'); }}><PauseIcon /></Button>\n      <Button className={classes.button} variant=\"contained\" onClick={() => { props.setControl('PLAY'); }}><PlayArrowIcon /></Button>\n      <Button className={classes.button} variant=\"contained\" onClick={() => { props.setControl('RESET'); }}><RefreshIcon /></Button>\n    </Card>\n  );\n}\n\nexport default connect(\n  null,\n  { setControl }\n)(Controls);\n","import ControlsComponent from './Controls';\nexport const Controls = ControlsComponent;","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { connect } from 'react-redux';\nimport { getTracker } from \"../../redux/selectors\";\nimport Card from '@material-ui/core/Card';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nconst useStyles = makeStyles({\n  card: {\n    maxWidth: 1000,\n    maxHeight: 200,\n    margin: 5\n  }\n});\n\nfunction Tracker({tracker}) {\n\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.card}>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} size=\"small\" aria-label=\"tracker data\">\n          <TableHead>\n            <TableRow>\n              <TableCell align=\"right\">Cycle</TableCell>\n              <TableCell align=\"right\">Bugs</TableCell>\n              <TableCell align=\"right\">Algae</TableCell>\n              <TableCell align=\"right\">Total Bugs</TableCell>\n              <TableCell align=\"right\">Total Species</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            <TableRow key={tracker.ticks}>\n              <TableCell align=\"right\">{tracker.ticks}</TableCell>\n              <TableCell align=\"right\">{tracker.bugs}</TableCell>\n              <TableCell align=\"right\">{tracker.algae}</TableCell>\n              <TableCell align=\"right\">{tracker.totalBugs}</TableCell>\n              <TableCell align=\"right\">{tracker.totalSpecies}</TableCell>\n            </TableRow>\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Card>\n  );\n\n};\n\nconst mapStateToProps = state => {\n  const tracker = getTracker(state);\n  return { tracker };\n};\n\nexport default connect(mapStateToProps)(Tracker);\n","import TrackerComponent from './Tracker';\nexport const Tracker = TrackerComponent;","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Route, MemoryRouter } from 'react-router';\nimport { Link as RouterLink, Switch } from 'react-router-dom';\n\n// material-ui components\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\n// material-ui icons\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport InfoIcon from '@material-ui/icons/Info';\nimport HomeIcon from '@material-ui/icons/Home';\nimport BugReportIcon from '@material-ui/icons/BugReport';\n\n// custom components\nimport { Parameters } from '../Parameters';\nimport { Title } from '../Title';\nimport { Simulation } from '../Simulation';\nimport { SummaryChart } from '../SummaryChart';\nimport { SpeciesChart } from '../SpeciesChart';\nimport { Controls } from '../Controls';\nimport { Tracker } from '../Tracker';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  offset: theme.mixins.toolbar,\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  menu: {\n    width: 250,\n  }\n}));\n\nexport default function Header() {\n  const classes = useStyles();\n\n  // React hooks state management\n  const [settings, setSettings] = useState(false);\n  const [menu, setMenu] = useState(false);\n\n  const toggleSettings = (open) => event => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    setSettings(open);\n  };\n\n  const toggleMenu = (open) => event => {\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\n      return;\n    }\n    setMenu(open);\n  };\n\n  const ListItemLink = (props) => {\n    const { icon, primary, to } = props;\n\n    const renderLink = React.useMemo(\n      () => React.forwardRef((itemProps, ref) => <RouterLink to={to} ref={ref} {...itemProps} />),\n      [to],\n    );\n\n    return (\n      <ListItem button component={renderLink}>\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\n        <ListItemText primary={primary} />\n      </ListItem>\n    );\n  };\n\n  ListItemLink.propTypes = {\n    icon: PropTypes.element,\n    primary: PropTypes.string.isRequired,\n    to: PropTypes.string.isRequired,\n  };\n\n  const menuList = () => (\n    <div\n      className={classes.menu}\n      role=\"presentation\"\n      onClick={toggleMenu(false)}\n      onKeyDown={toggleMenu(false)}\n    >\n      <List component=\"nav\" aria-label=\"navigation\">\n        {[\n          { text: 'Home', icon: <HomeIcon />, href: '/' },\n          { text: 'Simulation', icon: <BugReportIcon />, href: '/simulation' },\n          { text: 'About', icon: <InfoIcon />, href: '/about' },\n        ].map((entry, index) => (\n          <ListItemLink to={entry.href} primary={entry.text} icon={entry.icon} />\n        ))}\n      </List>\n    </div>\n  );\n\n  return (\n    <MemoryRouter initialEntries={['/about']} initialIndex={0}>\n      \n      <div className={classes.root}>\n        <AppBar position=\"fixed\">\n          <Toolbar>\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={toggleMenu(true)}>\n              <MenuIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              Bugs 2020\n          </Typography>\n            <IconButton edge=\"end\" className={classes.menuButton} color=\"inherit\" aria-label=\"settings\" onClick={toggleSettings(true)}>\n              <SettingsIcon />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n        <Drawer anchor=\"left\" open={menu} onClose={toggleMenu(false)}>\n          {menuList()}\n        </Drawer>\n        <Drawer anchor=\"right\" open={settings} onClose={toggleSettings(false)}>\n          <Parameters toggle={toggleSettings()} />\n        </Drawer>\n      </div>\n\n      <Switch>\n        <Route exact path=\"/\">\n          {/* <Home /> */}\n          <div/>\n        </Route>\n        <Route exact path=\"/simulation\">\n          <div className={classes.offset} />\n          <div>\n            <Controls />\n            <Simulation width={1000} height={500} />\n            <Tracker />\n            <SummaryChart />\n            <SpeciesChart />\n          </div>\n        </Route>\n        <Route path=\"/about\">\n          <div className={classes.offset} />\n          <div>\n            <Title />\n          </div>\n        </Route>\n      </Switch>\n\n    </MemoryRouter>\n  );\n\n}\n","import Component from './Header';\nexport const Header = Component;","import React from 'react';\n\n// material-ui components\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// custom components\nimport { Header } from './components/Header';\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'light', // dark | light\n  }\n});\n\nexport default function App() {\n\n  return (\n    <div className=\"App\">\n      <ThemeProvider theme={theme}>\n        <Header />\n      </ThemeProvider>\n    </div>\n  );\n};\n","import React from 'react';\nimport { render } from 'react-dom';\n\nimport { Provider } from 'react-redux'\nimport store from \"./redux/store\";\n\nimport './index.css';\nimport App from './App';\n\nrender(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}